<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
    <link rel="stylesheet" href="./css/survey.css" />
    <title>Survey</title>
  </head>
  <body>
    <div class="wrapper" style="margin:auto; width:80%;">
      <h2>Survey Questions</h2>
      <hr />
      <h3>
        <strong>About You:</strong>
      </h3>
      <form>
        <div class="row">
          <div class="col">
            <label for="User Name">Your Name</label>
            <input
              type="text"
              id="userName"
              class="form-control"
              placeholder="Your Name"
            />
          </div>
        </div>
        <div class="row">
          <div class="col">
            <label for="Profile Pic">Link to a Photo of Yourself</label>
            <input
              type="text"
              class="form-control"
              id="userPhoto"
              placeholder="Link to an Image of You"
            />
          </div>
        </div>
      </form>

      <label for="Question 1">How do you feel about noodles?</label>
      <select class="selectpicker" id="1">
        <option value="" selected disabled>Please select</option>
        <option>1 I hate noodles</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5 I am 80% noodles by mass.</option>
      </select>

      <br>
      <label for="Question 2">How do you feel about rice?</label>
      <select class="selectpicker" id="2">
          <option value="" selected disabled>Please select</option>
          <option>1 I hate rice</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 I am 80% rice by mass.</option>
        </select>

        
      <br>
      <label for="Question 3">How do you feel about hamburgers?</label>
      <select class="selectpicker" id="3">
          <option value="" selected disabled>Please select</option>
          <option>1 I hate hamburgers</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 I am 80% hamburgers by mass.</option>
        </select>

        
      <br>
      <label for="Question 4">How do you feel about zucchini?</label>
      <select class="selectpicker" id="4">
          <option value="" selected disabled>Please select</option>
          <option>1 I hate zucchini</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 I am 80% zucchini by mass.</option>
        </select>

        
      <br>
      <label for="Question 5">How do you feel about gummy worms?</label>
      <select class="selectpicker" id="5">
          <option value="" selected disabled>Please select</option>
          <option>1 I hate gummy worms</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 I am 80% gummy worms by mass.</option>
        </select>

        
      <br>
      <label for="Question 6">How do you feel about lime?</label>
      <select class="selectpicker" id="6">
          <option value="" selected disabled>Please select</option>
          <option>1 I hate lime</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 I am 80% lime by mass.</option>
        </select>

        
      <br>
      <label for="Question 7">How do you feel about exercise?</label>
      <select class="selectpicker" id="7">
          <option value="" selected disabled>Please select</option>
          <option>1 My body is a temple that was abandoned in 1731, and local animals now use it as a latrine.</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 My body is a temple, but like, one of those good ones that people like.</option>
        </select>

        
      <br>
      <label for="Question 8">How do you feel about sushi?</label>
      <select class="selectpicker" id="8">
          <option value="" selected disabled>Please select</option>
          <option>1 I hate sushi</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 I am 80% sushi by mass.</option>
        </select>

        
      <br>
      <label for="Question 9">How do you feel about lazy copy paste questions?</label>
      <select class="selectpicker" id="9">
          <option value="" selected disabled>Please select</option>
          <option>1 I hate lazy copy paste questions</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 I am Christopher Pete, and this is my homework.</option>
        </select>

        
      <br>
      <label for="Question 10">How do you feel about drinking coca-cola?</label>
      <select class="selectpicker" id="10">
          <option value="" selected disabled>Please select</option>
          <option>1 I hate drinking coca-cola</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 I am 80% coca-cola by mass.</option>
        </select>

        
      <br>
      <button type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i>
        Submit</button>

    </div>
    <script>
    $(document).ready(function() {
  console.log("Document ready");
  $("#submit").on("click", function(event) {
    event.preventDefault();
    // console.log($("#1").val());
    var userName = $("#userName").val();
    var userPhoto = $("#userPhoto").val();
    if (userName && userPhoto) {
      var userData = [userName, userPhoto];
    } else {
      alert("Please fill in your name and profile picture");
      return;
    }
    var sum = 0
    for (var i = 1; i < 11; i++) {
      var response = $("#" + i).val();
      if (response === null) {
        alert("Please fill in all of the checkboxes.");
        break;
      }
      console.log(response[0]);
      userData.push(response[0]);
      sum += parseInt( response[0])
    }
    userData.push(sum)
    userData = {responses:userData}
    findFriend(userData);
  });

  function findFriend(userData) {
    $.post("/api/new", userData)
      // on success, run this callback
      .then(function(response) {
        // log the data we found.
        console.log(response.name);
        // tell the user we're adding a character with an alert window
        alert("Calculating your friends.");
        alert("Your new best friend is " + response.name)
        // PsudoCode: The best friend's picture would be response.picture.
      });
  }

  // function getFriend() {
  //   $.get("/api/friend", function(data) {
  //     console.log(data);
  //   });
  // }
});
</script>
  </body>
</html>
